import{d as z,z as L,x as M,l as B,c as G,o as l,w as C,b as p,a as r,u as s,y as R,S as E,e as k,i as X,j as c,f as d,g as n,n as m,v as f,t as i,k as h,F as w,r as _}from"./app-C3F20lhx.js";import{_ as H}from"./CICITLayout.vue_vue_type_script_setup_true_lang-Cw8--tZG.js";import{A as O}from"./arrow-left-CWp8268v.js";import{T as W}from"./trash-2-Q8rs2RYQ.js";import{P as $}from"./plus-CL-FAp7L.js";import"./createLucideIcon-CofApReS.js";const J={class:"py-6"},K={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},Q={class:"mb-6"},Y={class:"flex items-center justify-between"},Z={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={class:"md:col-span-2"},oe={key:0,class:"mt-2 text-sm text-red-600"},te={class:"md:col-span-2"},se={key:0,class:"mt-2 text-sm text-red-600"},ae={key:0,class:"mt-2 text-sm text-red-600"},le={key:0,class:"mt-2 text-sm text-red-600"},de=["value"],ie={key:0,class:"mt-2 text-sm text-red-600"},ne=["value"],ue={key:0,class:"mt-2 text-sm text-red-600"},ce={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},me={key:0,class:"mt-2 text-sm text-red-600"},be={key:0,class:"mt-2 text-sm text-red-600"},ge={key:0,class:"mt-2"},fe=["src"],pe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ye={key:0,class:"mt-2 text-sm text-red-600"},xe={key:0,class:"mt-2 text-sm text-red-600"},ve={class:"space-y-4"},ke=["onUpdate:modelValue"],he=["value"],we=["onUpdate:modelValue"],_e={class:"flex items-end"},Ce=["onClick"],Ve={key:0,class:"mt-2 text-sm text-red-600"},Se={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-600"},Pe=["disabled"],Ue={key:0,class:"inline-flex items-center"},qe={key:1},Ie=z({__name:"Create",props:{tutores:{},gestiones:{},tiposParticipante:{},errors:{}},setup(j){const A=j,t=L(()=>A.errors||{}),a=M({nombre:"",descripcion:"",duracion_horas:40,nivel:"",logo_url:"",tutor_id:"",gestion_id:"",aula:"",cupos_totales:20,fecha_inicio:"",fecha_fin:"",precios:[{tipo_participante_id:"",precio:0}]}),V=B(!1),b=B(),S=g=>{g.preventDefault(),window.location.href="/dashboard",localStorage.setItem("activeDashboardSection","cursos")},D=async g=>{var u,P,U;const e=(u=g.target.files)==null?void 0:u[0];if(!e)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)){alert("Por favor seleccione una imagen válida (JPEG, PNG, WEBP)"),b.value&&(b.value.value="");return}if(e.size>2*1024*1024){alert("La imagen no debe superar los 2MB"),b.value&&(b.value.value="");return}const y=new FormData;y.append("image",e);try{const v=((P=document.querySelector('meta[name="csrf-token"]'))==null?void 0:P.getAttribute("content"))||((U=document.querySelector('input[name="_token"]'))==null?void 0:U.getAttribute("value")),q={"X-Requested-With":"XMLHttpRequest",Accept:"application/json"};v&&(q["X-CSRF-TOKEN"]=v);const T=await fetch("/responsable/cursos/upload-image",{method:"POST",body:y,headers:q,credentials:"same-origin"}),x=await T.json();T.ok&&x.success?(a.logo_url=x.url,console.log("Imagen subida exitosamente:",x.url)):(console.error("Error response:",x),alert("Error al subir la imagen: "+(x.message||"Error desconocido")),b.value&&(b.value.value=""))}catch(v){console.error("Error uploading image:",v),alert("Error de conectividad al subir la imagen. Intente nuevamente."),b.value&&(b.value.value="")}},I=()=>{a.precios.push({tipo_participante_id:"",precio:0})},N=g=>{a.precios.splice(g,1)},F=()=>{a.post(route("responsable.cursos.store"),{onSuccess:()=>{alert("Curso creado exitosamente"),localStorage.setItem("activeDashboardSection","cursos"),window.location.href="/dashboard"},onError:()=>{alert("Error al crear el curso. Por favor verifique los datos.")}})};return(g,e)=>(l(),G(H,null,{default:C(()=>[p(s(R),{title:"Crear Curso"}),r("div",J,[r("div",K,[r("div",Q,[r("div",Y,[e[11]||(e[11]=r("div",null,[r("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Crear Nuevo Curso"),r("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Complete la información del curso a crear ")],-1)),p(s(E),{href:"/dashboard",class:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",onClick:S},{default:C(()=>[p(s(O),{class:"w-4 h-4 mr-2"}),e[10]||(e[10]=k(" Volver "))]),_:1,__:[10]})])]),r("div",Z,[r("form",{onSubmit:X(F,["prevent"]),class:"p-6 space-y-6"},[r("div",null,[e[21]||(e[21]=r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Información Básica",-1)),r("div",ee,[r("div",re,[e[12]||(e[12]=r("label",{for:"nombre",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Nombre del Curso * ",-1)),c(r("input",{id:"nombre","onUpdate:modelValue":e[0]||(e[0]=o=>s(a).nombre=o),type:"text",required:"",class:m(["block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white",{"border-red-300":t.value.nombre}])},null,2),[[f,s(a).nombre]]),t.value.nombre?(l(),d("div",oe,i(t.value.nombre),1)):n("",!0)]),r("div",te,[e[13]||(e[13]=r("label",{for:"descripcion",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Descripción ",-1)),c(r("textarea",{id:"descripcion","onUpdate:modelValue":e[1]||(e[1]=o=>s(a).descripcion=o),rows:"3",class:m(["block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white",{"border-red-300":t.value.descripcion}])},null,2),[[f,s(a).descripcion]]),t.value.descripcion?(l(),d("div",se,i(t.value.descripcion),1)):n("",!0)]),r("div",null,[e[14]||(e[14]=r("label",{for:"duracion_horas",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Duración (horas) * ",-1)),c(r("input",{id:"duracion_horas","onUpdate:modelValue":e[2]||(e[2]=o=>s(a).duracion_horas=o),type:"number",min:"1",required:"",class:m(["block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white",{"border-red-300":t.value.duracion_horas}])},null,2),[[f,s(a).duracion_horas,void 0,{number:!0}]]),t.value.duracion_horas?(l(),d("div",ae,i(t.value.duracion_horas),1)):n("",!0)]),r("div",null,[e[16]||(e[16]=r("label",{for:"nivel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Nivel ",-1)),c(r("select",{id:"nivel","onUpdate:modelValue":e[3]||(e[3]=o=>s(a).nivel=o),class:m(["block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white",{"border-red-300":t.value.nivel}])},e[15]||(e[15]=[r("option",{value:""},"Seleccionar nivel",-1),r("option",{value:"Básico"},"Básico",-1),r("option",{value:"Intermedio"},"Intermedio",-1),r("option",{value:"Avanzado"},"Avanzado",-1)]),2),[[h,s(a).nivel]]),t.value.nivel?(l(),d("div",le,i(t.value.nivel),1)):n("",!0)]),r("div",null,[e[18]||(e[18]=r("label",{for:"tutor_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Tutor * ",-1)),c(r("select",{id:"tutor_id","onUpdate:modelValue":e[4]||(e[4]=o=>s(a).tutor_id=o),required:"",class:m(["block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white",{"border-red-300":t.value.tutor_id}])},[e[17]||(e[17]=r("option",{value:""},"Seleccionar tutor",-1)),(l(!0),d(w,null,_(g.tutores,o=>(l(),d("option",{key:o.id,value:o.id},i(o.nombre)+" "+i(o.apellido),9,de))),128))],2),[[h,s(a).tutor_id]]),t.value.tutor_id?(l(),d("div",ie,i(t.value.tutor_id),1)):n("",!0)]),r("div",null,[e[20]||(e[20]=r("label",{for:"gestion_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Gestión * ",-1)),c(r("select",{id:"gestion_id","onUpdate:modelValue":e[5]||(e[5]=o=>s(a).gestion_id=o),required:"",class:m(["block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white",{"border-red-300":t.value.gestion_id}])},[e[19]||(e[19]=r("option",{value:""},"Seleccionar gestión",-1)),(l(!0),d(w,null,_(g.gestiones,o=>(l(),d("option",{key:o.id,value:o.id},i(o.nombre),9,ne))),128))],2),[[h,s(a).gestion_id]]),t.value.gestion_id?(l(),d("div",ue,i(t.value.gestion_id),1)):n("",!0)])])]),r("div",null,[e[25]||(e[25]=r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Detalles del Curso",-1)),r("div",ce,[r("div",null,[e[22]||(e[22]=r("label",{for:"aula",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Aula ",-1)),c(r("input",{id:"aula","onUpdate:modelValue":e[6]||(e[6]=o=>s(a).aula=o),type:"text",class:m(["block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white",{"border-red-300":t.value.aula}])},null,2),[[f,s(a).aula]]),t.value.aula?(l(),d("div",me,i(t.value.aula),1)):n("",!0)]),r("div",null,[e[23]||(e[23]=r("label",{for:"cupos_totales",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Cupos Totales * ",-1)),c(r("input",{id:"cupos_totales","onUpdate:modelValue":e[7]||(e[7]=o=>s(a).cupos_totales=o),type:"number",min:"1",required:"",class:m(["block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white",{"border-red-300":t.value.cupos_totales}])},null,2),[[f,s(a).cupos_totales,void 0,{number:!0}]]),t.value.cupos_totales?(l(),d("div",be,i(t.value.cupos_totales),1)):n("",!0)]),r("div",null,[e[24]||(e[24]=r("label",{for:"logo_file",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Logo del Curso ",-1)),r("input",{id:"logo_file",ref_key:"logoInput",ref:b,type:"file",accept:"image/*",onChange:D,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,544),s(a).logo_url?(l(),d("div",ge,[r("img",{src:s(a).logo_url,alt:"Logo preview",class:"h-20 w-20 object-cover rounded-md"},null,8,fe)])):n("",!0)])])]),r("div",null,[e[28]||(e[28]=r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Fechas",-1)),r("div",pe,[r("div",null,[e[26]||(e[26]=r("label",{for:"fecha_inicio",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Fecha de Inicio * ",-1)),c(r("input",{id:"fecha_inicio","onUpdate:modelValue":e[8]||(e[8]=o=>s(a).fecha_inicio=o),type:"date",required:"",class:m(["block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white",{"border-red-300":t.value.fecha_inicio}])},null,2),[[f,s(a).fecha_inicio]]),t.value.fecha_inicio?(l(),d("div",ye,i(t.value.fecha_inicio),1)):n("",!0)]),r("div",null,[e[27]||(e[27]=r("label",{for:"fecha_fin",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Fecha de Fin * ",-1)),c(r("input",{id:"fecha_fin","onUpdate:modelValue":e[9]||(e[9]=o=>s(a).fecha_fin=o),type:"date",required:"",class:m(["block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white",{"border-red-300":t.value.fecha_fin}])},null,2),[[f,s(a).fecha_fin]]),t.value.fecha_fin?(l(),d("div",xe,i(t.value.fecha_fin),1)):n("",!0)])])]),r("div",null,[e[33]||(e[33]=r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Precios por Tipo de Participante",-1)),r("div",ve,[(l(!0),d(w,null,_(s(a).precios,(o,y)=>(l(),d("div",{key:y,class:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border border-gray-200 dark:border-gray-600 rounded-md"},[r("div",null,[e[30]||(e[30]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Tipo de Participante ",-1)),c(r("select",{"onUpdate:modelValue":u=>o.tipo_participante_id=u,required:"",class:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white"},[e[29]||(e[29]=r("option",{value:""},"Seleccionar tipo",-1)),(l(!0),d(w,null,_(g.tiposParticipante,u=>(l(),d("option",{key:u.id,value:u.id},i(u.codigo)+" - "+i(u.descripcion),9,he))),128))],8,ke),[[h,o.tipo_participante_id]])]),r("div",null,[e[31]||(e[31]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Precio (Bs.) ",-1)),c(r("input",{"onUpdate:modelValue":u=>o.precio=u,type:"number",min:"0",step:"0.01",required:"",class:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm dark:bg-gray-700 dark:text-white"},null,8,we),[[f,o.precio,void 0,{number:!0}]])]),r("div",_e,[s(a).precios.length>1?(l(),d("button",{key:0,type:"button",onClick:u=>N(y),class:"inline-flex items-center px-3 py-2 border border-red-300 text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[p(s(W),{class:"w-4 h-4"})],8,Ce)):n("",!0)])]))),128)),r("button",{type:"button",onClick:I,class:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[p(s($),{class:"w-4 h-4 mr-2"}),e[32]||(e[32]=k(" Agregar Precio "))])]),t.value.precios?(l(),d("div",Ve,i(t.value.precios),1)):n("",!0)]),r("div",Se,[p(s(E),{href:"/dashboard",class:"inline-flex justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:S},{default:C(()=>e[34]||(e[34]=[k(" Cancelar ")])),_:1,__:[34]}),r("button",{type:"submit",disabled:V.value,class:"inline-flex justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[V.value?(l(),d("span",Ue,e[35]||(e[35]=[r("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),k(" Creando... ")]))):(l(),d("span",qe,"Crear Curso"))],8,Pe)])],32)])])])]),_:1}))}});export{Ie as default};
