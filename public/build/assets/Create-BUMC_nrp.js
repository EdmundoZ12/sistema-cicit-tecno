import{d as F,l as v,h as N,x as S,m as q,c as R,o as i,w as I,a as e,f as d,g as l,i as V,j as k,v as h,e as g,t,n as w,u as c,b as T,S as O}from"./app-C3F20lhx.js";import{_ as U}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BZtHvZ5x.js";const A={class:"max-w-4xl mx-auto"},L={class:"bg-white dark:bg-gray-800 shadow rounded-lg mb-6"},H={class:"p-6"},$={class:"flex-1"},G=["disabled"],J={class:"flex items-end"},K=["disabled"],Q={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline",fill:"none",viewBox:"0 0 24 24"},W={key:0,class:"mt-4 p-4 bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800 rounded-md"},X={class:"flex"},Y={class:"ml-3"},Z={class:"text-sm text-red-800 dark:text-red-200"},ee={key:0,class:"bg-white dark:bg-gray-800 shadow rounded-lg mb-6"},re={class:"p-6"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},se={class:"space-y-2"},oe={class:"text-sm font-medium text-gray-900 dark:text-white"},ie={class:"text-sm font-medium text-gray-900 dark:text-white"},ae={class:"text-sm font-medium text-gray-900 dark:text-white"},de={class:"text-sm font-medium text-gray-900 dark:text-white"},ne={class:"space-y-2"},le={class:"text-sm font-medium text-gray-900 dark:text-white"},ce={class:"text-sm font-medium text-gray-900 dark:text-white"},ue={class:"text-lg font-bold text-green-600 dark:text-green-400"},me={class:"text-sm font-medium text-gray-900 dark:text-white"},pe={class:"mt-6 p-4 bg-green-50 dark:bg-green-900/50 border border-green-200 dark:border-green-800 rounded-md"},ge={class:"flex"},be={class:"ml-3"},xe={class:"text-sm text-green-800 dark:text-green-200"},ye={key:1,class:"bg-white dark:bg-gray-800 shadow rounded-lg"},fe={class:"p-6"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ke={key:0,class:"mt-1 text-sm text-red-600"},he={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},we={key:0,class:"mt-1 text-sm text-red-600"},_e={class:"mt-6"},Ce={key:0,class:"mt-1 text-sm text-red-600"},Be={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Pe={class:"mt-6 flex justify-end space-x-3"},Me=["disabled"],De={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Ie={key:0,class:"mt-4 p-4 bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800 rounded-md"},Ve={class:"flex"},ze={class:"ml-3"},je={class:"text-sm text-red-800 dark:text-red-200"},Ee={key:2,class:"bg-blue-50 dark:bg-blue-900/50 border border-blue-200 dark:border-blue-800 rounded-md p-6"},Se=F({__name:"Create",props:{preinscripcion:{},errors:{}},setup(z){const _=z,m=v(!1),b=v(!1),x=v(""),o=v(null),p=N({preinscripcion_id:""}),a=S({preinscripcion_id:0,monto:"",recibo:"",observaciones:""});_.preinscripcion&&(p.preinscripcion_id=_.preinscripcion.id.toString(),C());async function C(){var s,r,y,f;if(p.preinscripcion_id){m.value=!0,x.value="",o.value=null;try{const n=await q.post("/admin/pagos/buscar-preinscripcion",{id:parseInt(p.preinscripcion_id)});n.data.success&&(o.value=n.data.data,a.preinscripcion_id=o.value.preinscripcion.id,a.monto=((r=(s=o.value.precio_aplicable)==null?void 0:s.precio)==null?void 0:r.toString())||"")}catch(n){(f=(y=n.response)==null?void 0:y.data)!=null&&f.message?x.value=n.response.data.message:x.value="Error al buscar la preinscripción. Verifique el ID e intente nuevamente."}finally{m.value=!1}}}function j(){b.value=!0,a.post(route("admin.pagos.store"),{onFinish:()=>{b.value=!1}})}const B=s=>new Intl.NumberFormat("es-BO",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s),E=s=>{const r=new Date(s);return new Intl.DateTimeFormat("es-BO",{year:"numeric",month:"long",day:"numeric"}).format(r)};return(s,r)=>(i(),R(U,{"page-title":"Registrar Pago"},{default:I(()=>{var y,f,n,P,M,D;return[e("div",A,[e("div",L,[r[7]||(r[7]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," Buscar Preinscripción por ID "),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Ingrese el ID de la preinscripción para procesar el pago ")],-1)),e("div",H,[e("form",{onSubmit:V(C,["prevent"]),class:"flex gap-4"},[e("div",$,[r[4]||(r[4]=e("label",{for:"preinscripcion_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," ID de Preinscripción ",-1)),k(e("input",{id:"preinscripcion_id","onUpdate:modelValue":r[0]||(r[0]=u=>p.preinscripcion_id=u),type:"number",min:"1",required:"",placeholder:"Ej: 123",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",disabled:m.value},null,8,G),[[h,p.preinscripcion_id]])]),e("div",J,[e("button",{type:"submit",disabled:m.value||!p.preinscripcion_id,class:"px-6 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},[m.value?(i(),d("svg",Q,r[5]||(r[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):l("",!0),g(" "+t(m.value?"Buscando...":"Buscar"),1)],8,K)])],32),x.value?(i(),d("div",W,[e("div",X,[r[6]||(r[6]=e("svg",{class:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",Y,[e("p",Z,t(x.value),1)])])])):l("",!0)])]),o.value?(i(),d("div",ee,[r[20]||(r[20]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," Información de la Preinscripción ")],-1)),e("div",re,[e("div",te,[e("div",null,[r[12]||(r[12]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-4"},"Participante",-1)),e("dl",se,[e("div",null,[r[8]||(r[8]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Nombre completo",-1)),e("dd",oe,t(o.value.preinscripcion.participante.nombre)+" "+t(o.value.preinscripcion.participante.apellido),1)]),e("div",null,[r[9]||(r[9]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Carnet de Identidad",-1)),e("dd",ie,t(o.value.preinscripcion.participante.carnet),1)]),e("div",null,[r[10]||(r[10]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Tipo de Participante",-1)),e("dd",ae,t((y=o.value.preinscripcion.participante.tipo_participante)==null?void 0:y.nombre),1)]),e("div",null,[r[11]||(r[11]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Email",-1)),e("dd",de,t(o.value.preinscripcion.participante.email),1)])])]),e("div",null,[r[17]||(r[17]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-4"},"Curso",-1)),e("dl",ne,[e("div",null,[r[13]||(r[13]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Nombre del curso",-1)),e("dd",le,t(o.value.preinscripcion.curso.nombre),1)]),e("div",null,[r[14]||(r[14]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Tutor",-1)),e("dd",ce,t((f=o.value.preinscripcion.curso.tutor)==null?void 0:f.nombre)+" "+t((n=o.value.preinscripcion.curso.tutor)==null?void 0:n.apellido),1)]),e("div",null,[r[15]||(r[15]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Precio aplicable",-1)),e("dd",ue," Bs "+t(B(((P=o.value.precio_aplicable)==null?void 0:P.precio)||0)),1)]),e("div",null,[r[16]||(r[16]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Fecha de preinscripción",-1)),e("dd",me,t(E(o.value.preinscripcion.fecha_preinscripcion)),1)])])])]),e("div",pe,[e("div",ge,[r[19]||(r[19]=e("svg",{class:"h-5 w-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",be,[e("p",xe,[r[18]||(r[18]=e("strong",null,"Estado:",-1)),g(" "+t(o.value.preinscripcion.estado)+" - La preinscripción está lista para procesar el pago. ",1)])])])])])])):l("",!0),o.value?(i(),d("div",ye,[r[29]||(r[29]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," Registro de Pago "),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Complete la información del pago para inscribir oficialmente al participante ")],-1)),e("div",fe,[e("form",{onSubmit:V(j,["prevent"])},[e("div",ve,[e("div",null,[r[21]||(r[21]=e("label",{for:"monto",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Monto Pagado (Bs) * ",-1)),k(e("input",{id:"monto","onUpdate:modelValue":r[1]||(r[1]=u=>c(a).monto=u),type:"number",step:"0.01",min:"0",required:"",class:w(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",{"border-red-300":s.errors.monto}])},null,2),[[h,c(a).monto]]),s.errors.monto?(i(),d("p",ke,t(s.errors.monto),1)):l("",!0),e("p",he," Precio sugerido: Bs "+t(B(((M=o.value.precio_aplicable)==null?void 0:M.precio)||0)),1)]),e("div",null,[r[22]||(r[22]=e("label",{for:"recibo",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Número de Recibo * ",-1)),k(e("input",{id:"recibo","onUpdate:modelValue":r[2]||(r[2]=u=>c(a).recibo=u),type:"text",maxlength:"50",required:"",placeholder:"Ej: REC-2024-001234",class:w(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",{"border-red-300":s.errors.recibo}])},null,2),[[h,c(a).recibo]]),s.errors.recibo?(i(),d("p",we,t(s.errors.recibo),1)):l("",!0),r[23]||(r[23]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Debe ser único. Máximo 50 caracteres. ",-1))])]),e("div",_e,[r[24]||(r[24]=e("label",{for:"observaciones",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Observaciones ",-1)),k(e("textarea",{id:"observaciones","onUpdate:modelValue":r[3]||(r[3]=u=>c(a).observaciones=u),rows:"3",maxlength:"500",placeholder:"Observaciones adicionales sobre el pago (opcional)",class:w(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",{"border-red-300":s.errors.observaciones}])},null,2),[[h,c(a).observaciones]]),s.errors.observaciones?(i(),d("p",Ce,t(s.errors.observaciones),1)):l("",!0),e("p",Be,t(((D=c(a).observaciones)==null?void 0:D.length)||0)+"/500 caracteres ",1)]),r[27]||(r[27]=e("div",{class:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/50 border border-yellow-200 dark:border-yellow-800 rounded-md"},[e("div",{class:"flex"},[e("svg",{class:"h-5 w-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.134 16.5c-.77.833.192 2.5 1.732 2.5z"})]),e("div",{class:"ml-3"},[e("h4",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"},"Confirmación"),e("p",{class:"mt-1 text-sm text-yellow-700 dark:text-yellow-300"},[g(" Al procesar este pago, se creará automáticamente la "),e("strong",null,"inscripción oficial"),g(" del participante al curso. Esta acción no se puede deshacer. ")])])])],-1)),e("div",Pe,[T(c(O),{href:s.route("admin.pagos.index"),class:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:I(()=>r[25]||(r[25]=[g(" Cancelar ")])),_:1,__:[25]},8,["href"]),e("button",{type:"submit",disabled:b.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[b.value?(i(),d("svg",De,r[26]||(r[26]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):l("",!0),g(" "+t(b.value?"Procesando...":"Procesar Pago e Inscribir Participante"),1)],8,Me)])],32),s.errors.error?(i(),d("div",Ie,[e("div",Ve,[r[28]||(r[28]=e("svg",{class:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",ze,[e("p",je,t(s.errors.error),1)])])])):l("",!0)])])):(i(),d("div",Ee,r[30]||(r[30]=[e("div",{class:"flex"},[e("svg",{class:"h-6 w-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-blue-800 dark:text-blue-200"}," Instrucciones para Registrar un Pago "),e("div",{class:"mt-2 text-sm text-blue-700 dark:text-blue-300"},[e("ol",{class:"list-decimal list-inside space-y-1"},[e("li",null,'Ingrese el ID de la preinscripción y haga clic en "Buscar"'),e("li",null,"Verifique que la información del participante y curso sea correcta"),e("li",null,"Complete los datos del pago (monto y número de recibo)"),e("li",null,"Procese el pago para crear automáticamente la inscripción oficial")])])])],-1)])))])]}),_:1}))}});export{Se as default};
