import{P,S as y}from"./Primitive-3T6UhUtW.js";import{d as A,c as O,o as N,w as F,s as $,u as w,l as p,z as C,bb as k,Y as L,$ as V,aY as G,O as R,A as Y,a1 as j,b as z}from"./app-C3F20lhx.js";import{u as K,b as H}from"./useForwardExpose-D0vhYEHo.js";import{i as q,g as _,c as W}from"./useForwardPropsEmits-VOUkO5bG.js";const le=A({__name:"VisuallyHidden",props:{feature:{default:"focusable"},asChild:{type:Boolean},as:{default:"span"}},setup(e){return(t,n)=>(N(),O(w(P),{as:t.as,"as-child":t.asChild,"aria-hidden":t.feature==="focusable"?"true":void 0,"data-hidden":t.feature==="fully-hidden"?"":void 0,tabindex:t.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:F(()=>[$(t.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}});function J(e){const t=q({dir:p("ltr")});return C(()=>{var n;return(e==null?void 0:e.value)||((n=t.dir)==null?void 0:n.value)||"ltr"})}function x(){const e=p(),t=C(()=>{var n,o;return["#text","#comment"].includes((n=e.value)==null?void 0:n.$el.nodeName)?(o=e.value)==null?void 0:o.$el.nextElementSibling:K(e)});return{primitiveElement:e,currentElement:t}}const M="data-reka-collection-item";function Q(e={}){const{key:t="",isProvider:n=!1}=e,o=`${t}CollectionProvider`;let r;if(n){const s=p(new Map);r={collectionRef:p(),itemMap:s},k(o,r)}else r=L(o);const I=(s=!1)=>{const a=r.collectionRef.value;if(!a)return[];const i=Array.from(a.querySelectorAll(`[${M}]`)),c=Array.from(r.itemMap.value.values()).sort((d,m)=>i.indexOf(d.ref)-i.indexOf(m.ref));return s?c:c.filter(d=>d.ref.dataset.disabled!=="")},g=A({name:"CollectionSlot",setup(s,{slots:a}){const{primitiveElement:i,currentElement:u}=x();return Y(u,()=>{r.collectionRef.value=u.value}),()=>R(y,{ref:i},a)}}),S=A({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(s,{slots:a,attrs:i}){const{primitiveElement:u,currentElement:c}=x();return V(d=>{if(c.value){const m=G(c.value);r.itemMap.value.set(m,{ref:c.value,value:s.value}),d(()=>r.itemMap.value.delete(m))}}),()=>R(y,{...i,[M]:"",ref:u},a)}}),E=C(()=>Array.from(r.itemMap.value.values())),b=C(()=>r.itemMap.value.size);return{getItems:I,reactiveItems:E,itemMapSize:b,CollectionSlot:g,CollectionItem:S}}const X="rovingFocusGroup.onEntryFocus",Z={bubbles:!1,cancelable:!0},ee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function te(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ue(e,t,n){const o=te(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return ee[o]}function oe(e,t=!1){const n=_();for(const o of e)if(o===n||(o.focus({preventScroll:t}),_()!==n))return}function ce(e,t){return e.map((n,o)=>e[(t+o)%e.length])}const[de,ne]=W("RovingFocusGroup"),fe=A({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:t,emit:n}){const o=e,r=n,{loop:I,orientation:g,dir:S}=j(o),E=J(S),b=H(o,"currentTabStopId",r,{defaultValue:o.defaultCurrentTabStopId,passive:o.currentTabStopId===void 0}),s=p(!1),a=p(!1),i=p(0),{getItems:u,CollectionSlot:c}=Q({isProvider:!0});function d(l){const v=!a.value;if(l.currentTarget&&l.target===l.currentTarget&&v&&!s.value){const h=new CustomEvent(X,Z);if(l.currentTarget.dispatchEvent(h),r("entryFocus",h),!h.defaultPrevented){const T=u().map(f=>f.ref).filter(f=>f.dataset.disabled!==""),B=T.find(f=>f.getAttribute("data-active")===""),D=T.find(f=>f.id===b.value),U=[B,D,...T].filter(Boolean);oe(U,o.preventScrollOnEntryFocus)}}a.value=!1}function m(){setTimeout(()=>{a.value=!1},1)}return t({getItems:u}),ne({loop:I,dir:E,orientation:g,currentTabStopId:b,onItemFocus:l=>{b.value=l},onItemShiftTab:()=>{s.value=!0},onFocusableItemAdd:()=>{i.value++},onFocusableItemRemove:()=>{i.value--}}),(l,v)=>(N(),O(w(c),null,{default:F(()=>[z(w(P),{tabindex:s.value||i.value===0?-1:0,"data-orientation":w(g),as:l.as,"as-child":l.asChild,dir:w(E),style:{outline:"none"},onMousedown:v[0]||(v[0]=h=>a.value=!0),onMouseup:m,onFocus:d,onBlur:v[1]||(v[1]=h=>s.value=!1)},{default:F(()=>[$(l.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});export{le as _,Q as a,J as b,fe as c,oe as f,ue as g,de as i,x as u,ce as w};
