import{d as I,h as T,l as x,c as v,o,w as p,a as e,j as c,v as E,k as z,f as l,F as b,r as h,t as a,g as f,e as w,n as A,b as F,u as _,S as C,p as j,W as m}from"./app-B5KpPDY2.js";import{_ as L}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CKyM_fCJ.js";const O={class:"bg-white dark:bg-gray-800 shadow rounded-lg mb-6"},U={class:"p-6"},H={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},q={class:"md:col-span-2"},G={class:"relative"},W=["value"],Z={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},J={class:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4"},K={class:"flex items-center"},Q={class:"ml-4"},X={class:"text-2xl font-bold text-yellow-900 dark:text-yellow-100"},Y={class:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4"},ee={class:"flex items-center"},te={class:"ml-4"},se={class:"text-2xl font-bold text-green-900 dark:text-green-100"},re={class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},ae={class:"flex items-center"},oe={class:"ml-4"},de={class:"text-2xl font-bold text-red-900 dark:text-red-100"},le={class:"bg-white dark:bg-gray-800 shadow rounded-lg"},ne={class:"px-4 py-5 sm:p-6"},ie={class:"overflow-x-auto"},ce={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ue={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ge={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},me={class:"px-6 py-4 whitespace-nowrap"},xe={class:"flex items-center"},pe={class:"flex-shrink-0 h-10 w-10"},be={class:"h-10 w-10 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center"},fe={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},ye={class:"ml-4"},ke={class:"text-sm font-medium text-gray-900 dark:text-white"},ve={class:"text-sm text-gray-500 dark:text-gray-400"},he={class:"px-6 py-4"},we={class:"text-sm text-gray-900 dark:text-white"},_e={class:"text-sm text-gray-500 dark:text-gray-400"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Ae={class:"px-6 py-4 whitespace-nowrap"},Ee={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},ze=["onClick"],je=["onClick"],Pe={key:0,class:"mt-6"},De={class:"flex items-center justify-between"},Be={class:"hidden sm:block"},Me={class:"text-sm text-gray-700 dark:text-gray-300"},Se={class:"flex-1 flex justify-between sm:justify-end space-x-2"},Re={key:1,class:A(["px-3 py-2 text-sm rounded-md","bg-gray-100 dark:bg-gray-600 text-gray-400 dark:text-gray-500 cursor-not-allowed"])},Ne={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ve={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},$e={class:"relative inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ie={class:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Te={class:"fixed inset-0 z-50 overflow-y-auto"},Fe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Le={class:"relative inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Oe={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ue={class:"sm:flex sm:items-start"},He={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},qe={class:"mt-2"},Ge={class:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Je=I({__name:"Index",props:{preinscripciones:{},stats:{},cursos:{},filters:{}},setup(P){const y=P,n=T({search:y.filters.search||"",estado:y.filters.estado||"",curso_id:y.filters.curso_id||""}),u=x(!1),g=x(!1),d=x(null),i=x(""),k=()=>{m.get("/admin/preinscripciones",n,{preserveState:!0,replace:!0})},D=r=>{d.value=r,u.value=!0},B=r=>{d.value=r,g.value=!0,i.value=""},M=()=>{d.value&&(u.value=!1,m.patch(`/admin/preinscripciones/${d.value}/aprobar`,{},{onSuccess:()=>{d.value=null,m.visit(route("admin.preinscripciones.index"),{preserveScroll:!0})},onError:r=>{console.error("Error al aprobar:",r),d.value=null}}))},S=()=>{d.value&&(g.value=!1,m.patch(`/admin/preinscripciones/${d.value}/rechazar`,{observaciones:i.value},{onSuccess:()=>{d.value=null,i.value="",m.visit(route("admin.preinscripciones.index"),{preserveScroll:!0})},onError:r=>{console.error("Error al rechazar:",r),d.value=null,i.value=""}}))},R=()=>{window.open("/admin/preinscripciones/export?format=pdf","_blank")},N=r=>new Date(r).toLocaleDateString("es-BO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),V=r=>({PENDIENTE:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",APROBADA:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",RECHAZADA:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"})[r]||"bg-gray-100 text-gray-800";return(r,t)=>(o(),v(L,{"pending-count":r.stats.pendientes,"page-title":"Gestión de Preinscripciones"},{default:p(()=>[e("div",O,[e("div",U,[e("div",H,[e("div",q,[t[9]||(t[9]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Buscar preinscripción ",-1)),e("div",G,[c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.search=s),onInput:k,type:"text",id:"search",placeholder:"ID, nombre, apellido, carnet...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,544),[[E,n.search]]),t[8]||(t[8]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),e("div",null,[t[11]||(t[11]=e("label",{for:"estado",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Estado ",-1)),c(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.estado=s),onChange:k,id:"estado",class:"w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:text-white"},t[10]||(t[10]=[e("option",{value:""},"Todos los estados",-1),e("option",{value:"PENDIENTE"},"Pendiente",-1),e("option",{value:"APROBADA"},"Aprobada",-1),e("option",{value:"RECHAZADA"},"Rechazada",-1)]),544),[[z,n.estado]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"curso",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Curso ",-1)),c(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.curso_id=s),onChange:k,id:"curso",class:"w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:text-white"},[t[12]||(t[12]=e("option",{value:""},"Todos los cursos",-1)),(o(!0),l(b,null,h(r.cursos,s=>(o(),l("option",{key:s.id,value:s.id},a(s.nombre),9,W))),128))],544),[[z,n.curso_id]])])])])]),e("div",Z,[e("div",J,[e("div",K,[t[15]||(t[15]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-8 h-8 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Q,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-yellow-600 dark:text-yellow-400"},"Pendientes",-1)),e("p",X,a(r.stats.pendientes),1)])])]),e("div",Y,[e("div",ee,[t[17]||(t[17]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-8 h-8 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",te,[t[16]||(t[16]=e("p",{class:"text-sm font-medium text-green-600 dark:text-green-400"},"Aprobadas",-1)),e("p",se,a(r.stats.aprobadas),1)])])]),e("div",re,[e("div",ae,[t[19]||(t[19]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e("div",oe,[t[18]||(t[18]=e("p",{class:"text-sm font-medium text-red-600 dark:text-red-400"},"Rechazadas",-1)),e("p",de,a(r.stats.rechazadas),1)])])])]),e("div",le,[e("div",ne,[e("div",{class:"sm:flex sm:items-center sm:justify-between mb-6"},[t[21]||(t[21]=e("div",null,[e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white"}," Preinscripciones "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Gestiona las preinscripciones de los participantes ")],-1)),e("div",{class:"mt-4 sm:mt-0"},[e("button",{onClick:R,class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 active:bg-blue-900 focus:outline-none focus:border-blue-900 focus:ring focus:ring-blue-300 disabled:opacity-25 transition"},t[20]||(t[20]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),w(" Exportar PDF ")]))])]),e("div",ie,[e("table",ce,[t[24]||(t[24]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," ID "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Participante "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Curso "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Fecha "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Estado "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Acciones ")])],-1)),e("tbody",ue,[(o(!0),l(b,null,h(r.preinscripciones.data,s=>(o(),l("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",ge," #"+a(String(s.id).padStart(6,"0")),1),e("td",me,[e("div",xe,[e("div",pe,[e("div",be,[e("span",fe,a(s.participante.nombre.charAt(0))+a(s.participante.apellido.charAt(0)),1)])]),e("div",ye,[e("div",ke,a(s.participante.nombre)+" "+a(s.participante.apellido),1),e("div",ve,a(s.participante.carnet),1)])])]),e("td",he,[e("div",we,a(s.curso.nombre),1),e("div",_e,a(s.curso.tutor.nombre_completo),1)]),e("td",Ce,a(N(s.fecha_preinscripcion)),1),e("td",Ae,[e("span",{class:A([V(s.estado),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},a(s.estado),3)]),e("td",Ee,[F(_(C),{href:`/admin/preinscripciones/${s.id}`,class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"},{default:p(()=>t[22]||(t[22]=[w(" Ver ")])),_:2,__:[22]},1032,["href"]),s.estado==="PENDIENTE"?(o(),l("button",{key:0,onClick:$=>D(s.id),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}," Aprobar ",8,ze)):f("",!0),s.estado==="PENDIENTE"?(o(),l("button",{key:1,onClick:$=>B(s.id),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}," Rechazar ",8,je)):f("",!0),s.estado==="APROBADA"&&!s.tiene_pago?(o(),v(_(C),{key:2,href:`/admin/pagos/registrar?preinscripcion=${s.id}`,class:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300"},{default:p(()=>t[23]||(t[23]=[w(" Registrar Pago ")])),_:2,__:[23]},1032,["href"])):f("",!0)])]))),128))])])]),r.preinscripciones.links.length>3?(o(),l("div",Pe,[e("nav",De,[e("div",Be,[e("p",Me," Mostrando "+a(r.preinscripciones.from)+" a "+a(r.preinscripciones.to)+" de "+a(r.preinscripciones.total)+" resultados ",1)]),e("div",Se,[(o(!0),l(b,null,h(r.preinscripciones.links,s=>(o(),l(b,{key:s.label},[s.url?(o(),v(_(C),{key:0,href:s.url,class:A(["px-3 py-2 text-sm rounded-md",s.active?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-300 dark:border-gray-600"])},{default:p(()=>[e("span",null,a(s.label.replace("«","«").replace("»","»")),1)]),_:2},1032,["href","class"])):(o(),l("span",Re,a(s.label.replace("«","«").replace("»","»")),1))],64))),128))])])])):f("",!0)])]),c(e("div",Ne,[e("div",Ve,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[3]||(t[3]=s=>u.value=!1)}),t[26]||(t[26]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",$e,[t[25]||(t[25]=e("div",{class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[e("div",{class:"sm:flex sm:items-start"},[e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])]),e("div",{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white"}," Aprobar Preinscripción "),e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," ¿Estás seguro de que deseas aprobar esta preinscripción? Esta acción permitirá al participante proceder con el pago. ")])])])],-1)),e("div",Ie,[e("button",{onClick:M,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm"}," Aprobar "),e("button",{onClick:t[4]||(t[4]=s=>u.value=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancelar ")])])])],512),[[j,u.value]]),c(e("div",Te,[e("div",Fe,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[5]||(t[5]=s=>g.value=!1)}),t[30]||(t[30]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",Le,[e("div",Oe,[e("div",Ue,[t[29]||(t[29]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e("div",He,[t[28]||(t[28]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white"}," Rechazar Preinscripción ",-1)),e("div",qe,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"}," ¿Estás seguro de que deseas rechazar esta preinscripción? Por favor proporciona una razón. ",-1)),c(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>i.value=s),rows:"3",class:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm dark:bg-gray-700 dark:text-white",placeholder:"Motivo del rechazo..."},null,512),[[E,i.value]])])])])]),e("div",Ge,[e("button",{onClick:S,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Rechazar "),e("button",{onClick:t[7]||(t[7]=s=>g.value=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancelar ")])])])],512),[[j,g.value]])]),_:1},8,["pending-count"]))}});export{Je as default};
